<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Optimize your images instantly with our AI-powered image compressor. Reduce file size while maintaining quality. Supports JPG, PNG, and WebP formats.">
    
    <!-- SEO Optimized Meta Keywords -->
    <meta name="keywords" content="image compressor, online image compressor, jpg compressor, png compressor, webp compressor, reduce image size, compress images free, photo size reducer, image optimizer, AI image compression, shrink image size, best image compressor, online image resizer, reduce photo size, high-quality image compression, lossless image compression, image compression tool, photo compressor online, picture compressor, fast image compressor">

    <title>Instant Image Compressor - Smart Size Reduction</title>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1d4ed8;
            --background: #f8fafc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            line-height: 1.5;
            padding: 2rem;
            background-color: var(--background);
            color: #1e293b;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .main-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }

        .ad-header {
            margin-bottom: 2rem;
            text-align: center;
        }

        .upload-card {
            border: 2px dashed #cbd5e1;
            padding: 3rem 2rem;
            text-align: center;
            margin: 2rem 0;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
            background: #f1f5f9;
            cursor: pointer;
        }

        .upload-card:hover {
            border-color: var(--primary-color);
            background: #e0f2fe;
            transform: translateY(-2px);
        }

        .upload-card.dragover {
            border-color: var(--primary-color);
            background: #e0f2fe;
        }

        .preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .preview-box {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .preview-img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 0.5rem;
        }

        .button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .button:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
        }

        .button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            margin: 2rem 0;
            text-align: center;
        }

        .loading-spinner {
            width: 2rem;
            height: 2rem;
            border: 3px solid #e2e8f0;
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .main-content {
                padding: 1.5rem;
            }
            
            .upload-card {
                padding: 2rem 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- AdSense Header -->
    <div class="ad-header">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="container">
        <main class="main-content">
            <h1 style="text-align: center; margin-bottom: 1.5rem;">Smart Image Compressor</h1>
            
            <div class="upload-card" id="dropZone">
                <i class="fas fa-cloud-upload-alt fa-3x" style="color: var(--primary-color); margin-bottom: 1rem;"></i>
                <h3>Drag & Drop Images</h3>
                <p>or click to select files</p>
                <input type="file" id="fileInput" accept="image/*" hidden>
            </div>

            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <p style="margin-top: 1rem;">Optimizing your image...</p>
            </div>

            <div class="preview-container">
                <div class="preview-box">
                    <h3><i class="fas fa-file-upload"></i> Original</h3>
                    <div id="originalPreview"></div>
                    <div class="stats">
                        <span>Size:</span>
                        <strong id="originalSize">-</strong>
                    </div>
                </div>
                
                <div class="preview-box">
                    <h3><i class="fas fa-file-download"></i> Compressed</h3>
                    <div id="compressedPreview"></div>
                    <div class="stats">
                        <span>New Size:</span>
                        <strong id="compressedSize">-</strong>
                    </div>
                    <a id="downloadLink" class="button" style="display: none; text-decoration: none;">
                        <i class="fas fa-download"></i> Download
                    </a>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="button" id="compressBtn">
                    <i class="fas fa-compress"></i> Compress Now
                </button>
            </div>
        </main>
    </div>

    <script>
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const compressBtn = document.getElementById('compressBtn');
        const loading = document.getElementById('loading');

        // File handling
        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            fileInput.files = e.dataTransfer.files;
            handleFileSelect();
        });

        fileInput.addEventListener('change', handleFileSelect);

        async function handleFileSelect() {
            const file = fileInput.files[0];
            if (!file || !file.type.startsWith('image/')) return;

            // Preview original
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('originalPreview').innerHTML = 
                    `<img src="${e.target.result}" class="preview-img" alt="Original preview">`;
                document.getElementById('originalSize').textContent = 
                    formatBytes(file.size);
            };
            reader.readAsDataURL(file);
        }

        compressBtn.addEventListener('click', async () => {
            const file = fileInput.files[0];
            if (!file) return;

            loading.style.display = 'block';
            compressBtn.disabled = true;

            try {
                const compressedBlob = await compressImage(file);
                const compressedUrl = URL.createObjectURL(compressedBlob);
                
                document.getElementById('compressedPreview').innerHTML = 
                    `<img src="${compressedUrl}" class="preview-img" alt="Compressed preview">`;
                document.getElementById('compressedSize').textContent = 
                    formatBytes(compressedBlob.size);
                
                const downloadLink = document.getElementById('downloadLink');
                downloadLink.href = compressedUrl;
                downloadLink.download = `optimized_${file.name}`;
                downloadLink.style.display = 'inline-flex';
            } catch (error) {
                alert('Error compressing image: ' + error.message);
            } finally {
                loading.style.display = 'none';
                compressBtn.disabled = false;
            }
        });

        async function compressImage(file) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.src = URL.createObjectURL(file);
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');

                    // Set the canvas dimensions to the image dimensions
                    canvas.width = img.width;
                    canvas.height = img.height;

                    // Draw the image on the canvas
                    ctx.drawImage(img, 0, 0);

                    // Compress the image
                    canvas.toBlob((blob) => {
                        if (blob) {
                            resolve(blob);
                        } else {
                            reject(new Error('Failed to compress image'));
                        }
                    }, file.type.startsWith('image/jpeg') ? 'image/jpeg' : 'image/png', 0.80);
                };
                img.onerror = () => reject(new Error('Failed to load image'));
            });
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
